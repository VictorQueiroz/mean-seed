(function () {
	'use strict';

	angular
		.module('App/Controllers', []);
})();
(function () {
	'use strict';

	angular
		.module('App/Directives', []);
})();
(function () {
	'use strict';

	angular
		.module('App/Filters', [])

		.config(function () {
			console.log('Configuring module App/Filters...');
		})

		.run(function () {
			console.log('Running module App/Filters...');
		});
})();
(function () {
	'use strict';

	angular
		.module('App', [
			'ngRoute',
			'ngAnimate',
			'ngSanitize',

			'ngSocketIO',
			'ui.bootstrap',
			'mgcrea.ngStrap',	
			'pascalprecht.translate',
			'victorqueiroz.ngPaginator',

			'App/Controllers',
			'App/Filters',
			'App/Directives',
			'App/Services',
			'App/Partials',
			'App/Routes',			

			'Auth',
			'Post',
		])

		.constant('_CSRF', angular.element(document.querySelector('meta[name=_csrf]')).attr('content'))

		.config(['$httpProvider', '_CSRF', function ($httpProvider, _CSRF) {
			$httpProvider.defaults.headers.common = {
				'X-CSRF-Token': _CSRF
			};

			console.log('Configuring module: App...');
		}])

		.run(['$rootScope', '$socket', function($rootScope, $socket) {
			$socket().then(function(socket) {
				socket.on('user connected', function () {
					console.log('New user connected!');
				});

				socket.on('user disconnected', function () {
					console.log('A user disconnected!');
					$rootScope.$broadcast('user disconnected');
				});

				$rootScope.$on('user disconnected', function () {
				});
			});

			console.log('Running module: App...');
		}]);
})();
(function () {
	'use strict';

	angular
		.module('App/Routes', [])

		.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {
			console.log('Configuring module App/Routes...');

			$routeProvider

				.when('/', {
					templateUrl: 'index.tpl.html'
				})

				.when('/about-us', {
					templateUrl: 'about-us.tpl.html'
				})

				.otherwise({ redirectTo: '/' });

			$locationProvider.html5Mode(true);
		}])

		.run(function () {
			console.log('Running module App/Routes...');
		});
})();
(function () {
	'use strict';

	angular
		.module('App/Services', [])

		.value('version', '0.0.1');
})();
(function () {
	'use strict';

	angular.module('Auth/Ctrl/Auth', [])

	.controller('AuthCtrl', ['$scope', '$http', '$socket', '$location', '$window', function ($scope, $http, $socket, $location, $window) {
		$scope.authenticate = function (credentials) {
			$http.post('/auth/local', credentials).then(function(res) {
				var user = res.data;

				$socket().then(function(socket) {
					if(!res.data.result) {
						socket.emit('user unauthorized', {});
					}
					
					if (user.username) {
						socket.emit('user authenticated', user);
						$location.path('/');
					}	else {
						socket.emit('user authentication error', {});
					}
				});
			});
		};

		$scope.authenticateWithFB = function () {
			$window.location.href = '/auth/facebook';
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Service', []);
})();
(function () {
	'use strict';

	angular.module('Auth/Directive/IfAuthenticated', [])

	.directive('ifAuthenticated', ['Session', function(Session) {
		return {
			link: function($scope, $element, $attr) {
				Session.isAuthenticated().then(function(res) {
					if(!res.result) {
						$element.remove();
					}
				});
			}
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Directive/IfGuest', [])

	.directive('ifGuest', ['Session', function(Session) {
		return {
			link: function($scope, $element) {
				Session.isAuthenticated().then(function(res) {
					if(res.result) {
						$element.remove();
					}
				});
			}
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Controllers', [
		'Auth/Ctrl/Auth'
	]);
})();
(function () {
	'use strict';

	angular.module('Auth/Directives', [
		'Auth/Directive/IfAuthenticated',
		'Auth/Directive/IfGuest'
	]);
})();
(function () {
	'use strict';

	angular.module('Auth', [
		'ngRoute',
		'ngSocketIO',

		'Session/Service',

		'Auth/Controllers',
		'Auth/Routes',
		'Auth/Directives'
	])

	.run(['$rootScope', '$route', '$location', '$socket', 'Session', function($rootScope, $route, $location, $socket, Session) {
		$socket().then(function(socket) {
			socket.on('user authenticated', function(user) {
				console.log('Congratulations, '+user.username+', you\'re logged!');
			});

			socket.on('user unauthorized', function() {
				console.log('Sorry, you can not access this area!');
			});

			socket.on('user authentication error', function () {
				console.log('Ocorreu um erro, tente novamente mais tarde!');
			});
		});

		$rootScope.$on('session:logout', function () {
			Session.destroy();
		});

		$rootScope.$on('$routeChangeStart', function(event, next) {
			var params = next.$$route;

			console.log('Checking if you can access this location...');

			var isAuthenticated = Session.isAuthenticated;

			if(params.guest) { // Only guests users will can go in.
				console.log('This route are reserved for guests!');
				console.log('Checking if you are a guest...');

				isAuthenticated().then(function(res) {
					if(res.result) {
						console.log('You are not a guest.');
						console.log('You can not access this area.');
						$location.path('/'); // Temporary, until $routeChangeStart can not prevent default this event.
					} else if (!res.result) {
						console.log('You are a guest, you can go on!');
					}
				});
			} else if (params.authenticated) { // Only authenticated users will can go in.
				console.log('This route are reserved for authenticated users!');
				console.log('Checking if you are authenticated...');
				isAuthenticated().then(function(res) {
					if(!res.result) {
						console.log('You are not authenticated.');
						console.log('You can not access this area.');
						$location.path('/'); // Temporary, until $routeChangeStart can not prevent default this event.
					} else if (res.result) {
						console.log('You are authenticated, you can go on!');
					}
				});
			}

			// ngRoute bug
			// event.preventDefault();
		});	
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Routes', [])

	.config(['$routeProvider', function ($routeProvider) {
		$routeProvider
			.when('/authentication', {
				templateUrl: 'authentication.tpl.html',
				controller: 'AuthCtrl',
				guest: true
			});
	}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Service', ['ngResource'])

		.factory('Post', ['$resource', function ($resource) {
			return $resource ('', {}, {
				'get': {url: '/api/posts/:id', params: {id: '@id'}, method: 'GET', isArray: false},
				'list': {url: '/api/posts', params: {}, method: 'GET', isArray: false},
				'save': {url: '/api/posts', params: {}, method: 'POST', isArray: false},
				'update': {url: '/api/posts/:id', params: {id: '@id'}, method: 'PUT', isArray: false},
				'destroy': {url: '/api/posts/:id', params: {id: '@id'}, method: 'DELETE', isArray: false}
			});
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostCreate', [])

		.controller('PostCreateCtrl', ['$scope', '$location', '$socket', 'Post', function ($scope, $location, $socket, Post) {
			$scope.post = new Post();

			$scope.storePost = function (post) {
				post
					.$save()
					.then(function(post) {
						if(post) {
							$socket().then(function(socket) {
								socket.emit('post new', post._id);
							});
							
							$location.path('/posts/' + (post._id ? post._id : ''));
						}
					});
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostDetail', [])

		.controller('PostDetailCtrl', ['$scope', '$routeParams', 'Post', function ($scope, $routeParams, Post) {
			var post = $scope.post = Post.get({ id: $routeParams.id });
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostEdit', [])

		.controller('PostEditCtrl', ['$scope', '$location', '$routeParams', 'Post', function ($scope, $location, $routeParams, Post) {
			$scope.post = Post.get({ id: $routeParams.id });

			$scope.updatePost = function (post) {
				post
					.$update()
					.then(function () {
						$location.path('/posts');
					});
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostList', [])

		.controller('PostListCtrl', ['$scope', '$location', '$socket', '$moment', 'Post', function ($scope, $location, $socket, $moment, Post) {
			$scope.$watch('paginator.perPage', function(perPage) {
				$scope.$broadcast('posts paginator reload');
			});

			$scope.$on('posts page changed', function(event, page, paginator) {
				if(paginator.perPage < 1) {
					paginator.perPage = 4;
				}

				Post.list({
					page: page,
					per_page: paginator.perPage
				}).$promise.then(function(pag) {
					$moment().then(function(moment) {
						$scope.posts = pag.data;

						Object.keys($scope.posts).forEach(function (key) {
							var post = $scope.posts[key];

							post.created_at = moment(post.created_at).fromNow();
						});
					});

					angular.extend(paginator, pag);
				});
			});

			$socket().then(function(socket) {
				socket.on('post new', function(post) {
					console.log(post);
					
					$scope.$broadcast('posts paginator reload');
				});
			});

			$scope.editPost = function (post) {
				$location.path('/posts/' + post.id + '/edit');
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Controllers', [	
			'Post/Ctrl/PostList',
			'Post/Ctrl/PostDetail',
			'Post/Ctrl/PostCreate',
			'Post/Ctrl/PostEdit'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Post', [
			'ngRoute',
			'ngSocketIO',
			'ngMoment',

			'Post/Controllers',
			'Post/Services',
			'Post/Routes'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Routes', [])

		.config(['$routeProvider', function ($routeProvider) {
			$routeProvider
				.when('/posts', {
					templateUrl: 'posts/list.tpl.html',
					controller: 'PostListCtrl'
				})

				.when('/posts/create', {
					templateUrl: 'posts/create.tpl.html',
					controller: 'PostCreateCtrl'
				})

				.when('/posts/:id', {
					templateUrl: 'posts/show.tpl.html',
					controller: 'PostDetailCtrl'
				})

				.when('/posts/:id/edit', {
					templateUrl: 'posts/edit.tpl.html',
					controller: 'PostEditCtrl'
				});
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Services', [
			'Post/Service'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Session/Service', [])

		.factory('Session', ['$http', '$window', function ($http, $window) {
			var request = function () {
				return $http.get('/auth/check');
			};

			return {
				isAuthenticated: function () {
					return request().then(function(res) {
						if(res.data.result) {
							return {result: true};
						} else {
							return {result: false};
						}
					});
				},

				getUser: function () {
					return request().then(function(res) {
						if(res.data.result) {
							return res.data.user;
						}	else {
							return {result: false};
						}
					});
				},

				destroy: function () {
					$window.location.href = '/auth/destroy';
				}
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Session', [
			'Session/Services'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Session/Services', [
			'Session/Service'
		]);
})();
(function () {
	'use strict';

	angular.module('Auth/Ctrl/Auth', [])

	.controller('AuthCtrl', ['$scope', '$http', '$socket', '$location', '$window', function ($scope, $http, $socket, $location, $window) {
		$scope.authenticate = function (credentials) {
			$http.post('/auth/local', credentials).then(function(res) {
				var user = res.data;

				$socket().then(function(socket) {
					if(!res.data.result) {
						socket.emit('user unauthorized', {});
					}
					
					if (user.username) {
						socket.emit('user authenticated', user);
						$location.path('/');
					}	else {
						socket.emit('user authentication error', {});
					}
				});
			});
		};

		$scope.authenticateWithFB = function () {
			$window.location.href = '/auth/facebook';
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Service', []);
})();
(function () {
	'use strict';

	angular.module('Auth/Directive/IfAuthenticated', [])

	.directive('ifAuthenticated', ['Session', function(Session) {
		return {
			link: function($scope, $element, $attr) {
				Session.isAuthenticated().then(function(res) {
					if(!res.result) {
						$element.remove();
					}
				});
			}
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Directive/IfGuest', [])

	.directive('ifGuest', ['Session', function(Session) {
		return {
			link: function($scope, $element) {
				Session.isAuthenticated().then(function(res) {
					if(res.result) {
						$element.remove();
					}
				});
			}
		};
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Controllers', [
		'Auth/Ctrl/Auth'
	]);
})();
(function () {
	'use strict';

	angular.module('Auth/Directives', [
		'Auth/Directive/IfAuthenticated',
		'Auth/Directive/IfGuest'
	]);
})();
(function () {
	'use strict';

	angular.module('Auth', [
		'ngRoute',
		'ngSocketIO',

		'Session/Service',

		'Auth/Controllers',
		'Auth/Routes',
		'Auth/Directives'
	])

	.run(['$rootScope', '$route', '$location', '$socket', 'Session', function($rootScope, $route, $location, $socket, Session) {
		$socket().then(function(socket) {
			socket.on('user authenticated', function(user) {
				console.log('Congratulations, '+user.username+', you\'re logged!');
			});

			socket.on('user unauthorized', function() {
				console.log('Sorry, you can not access this area!');
			});

			socket.on('user authentication error', function () {
				console.log('Ocorreu um erro, tente novamente mais tarde!');
			});
		});

		$rootScope.$on('session:logout', function () {
			Session.destroy();
		});

		$rootScope.$on('$routeChangeStart', function(event, next) {
			var params = next.$$route;

			console.log('Checking if you can access this location...');

			var isAuthenticated = Session.isAuthenticated;

			if(params.guest) { // Only guests users will can go in.
				console.log('This route are reserved for guests!');
				console.log('Checking if you are a guest...');

				isAuthenticated().then(function(res) {
					if(res.result) {
						console.log('You are not a guest.');
						console.log('You can not access this area.');
						$location.path('/'); // Temporary, until $routeChangeStart can not prevent default this event.
					} else if (!res.result) {
						console.log('You are a guest, you can go on!');
					}
				});
			} else if (params.authenticated) { // Only authenticated users will can go in.
				console.log('This route are reserved for authenticated users!');
				console.log('Checking if you are authenticated...');
				isAuthenticated().then(function(res) {
					if(!res.result) {
						console.log('You are not authenticated.');
						console.log('You can not access this area.');
						$location.path('/'); // Temporary, until $routeChangeStart can not prevent default this event.
					} else if (res.result) {
						console.log('You are authenticated, you can go on!');
					}
				});
			}

			// ngRoute bug
			// event.preventDefault();
		});	
	}]);
})();
(function () {
	'use strict';

	angular.module('Auth/Routes', [])

	.config(['$routeProvider', function ($routeProvider) {
		$routeProvider
			.when('/authentication', {
				templateUrl: 'authentication.tpl.html',
				controller: 'AuthCtrl',
				guest: true
			});
	}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Service', ['ngResource'])

		.factory('Post', ['$resource', function ($resource) {
			return $resource ('', {}, {
				'get': {url: '/api/posts/:id', params: {id: '@id'}, method: 'GET', isArray: false},
				'list': {url: '/api/posts', params: {}, method: 'GET', isArray: false},
				'save': {url: '/api/posts', params: {}, method: 'POST', isArray: false},
				'update': {url: '/api/posts/:id', params: {id: '@id'}, method: 'PUT', isArray: false},
				'destroy': {url: '/api/posts/:id', params: {id: '@id'}, method: 'DELETE', isArray: false}
			});
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostCreate', [])

		.controller('PostCreateCtrl', ['$scope', '$location', '$socket', 'Post', function ($scope, $location, $socket, Post) {
			$scope.post = new Post();

			$scope.storePost = function (post) {
				post
					.$save()
					.then(function(post) {
						if(post) {
							$socket().then(function(socket) {
								socket.emit('post new', post._id);
							});
							
							$location.path('/posts/' + (post._id ? post._id : ''));
						}
					});
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostDetail', [])

		.controller('PostDetailCtrl', ['$scope', '$routeParams', 'Post', function ($scope, $routeParams, Post) {
			var post = $scope.post = Post.get({ id: $routeParams.id });
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostEdit', [])

		.controller('PostEditCtrl', ['$scope', '$location', '$routeParams', 'Post', function ($scope, $location, $routeParams, Post) {
			$scope.post = Post.get({ id: $routeParams.id });

			$scope.updatePost = function (post) {
				post
					.$update()
					.then(function () {
						$location.path('/posts');
					});
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Ctrl/PostList', [])

		.controller('PostListCtrl', ['$scope', '$location', '$socket', '$moment', 'Post', function ($scope, $location, $socket, $moment, Post) {
			$scope.$watch('paginator.perPage', function(perPage) {
				$scope.$broadcast('posts paginator reload');
			});

			$scope.$on('posts page changed', function(event, page, paginator) {
				if(paginator.perPage < 1) {
					paginator.perPage = 4;
				}

				Post.list({
					page: page,
					per_page: paginator.perPage
				}).$promise.then(function(pag) {
					$moment().then(function(moment) {
						$scope.posts = pag.data;

						Object.keys($scope.posts).forEach(function (key) {
							var post = $scope.posts[key];

							post.created_at = moment(post.created_at).fromNow();
						});
					});

					angular.extend(paginator, pag);
				});
			});

			$socket().then(function(socket) {
				socket.on('post new', function(post) {
					console.log(post);
					
					$scope.$broadcast('posts paginator reload');
				});
			});

			$scope.editPost = function (post) {
				$location.path('/posts/' + post.id + '/edit');
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Controllers', [	
			'Post/Ctrl/PostList',
			'Post/Ctrl/PostDetail',
			'Post/Ctrl/PostCreate',
			'Post/Ctrl/PostEdit'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Post', [
			'ngRoute',
			'ngSocketIO',
			'ngMoment',

			'Post/Controllers',
			'Post/Services',
			'Post/Routes'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Routes', [])

		.config(['$routeProvider', function ($routeProvider) {
			$routeProvider
				.when('/posts', {
					templateUrl: 'posts/list.tpl.html',
					controller: 'PostListCtrl'
				})

				.when('/posts/create', {
					templateUrl: 'posts/create.tpl.html',
					controller: 'PostCreateCtrl'
				})

				.when('/posts/:id', {
					templateUrl: 'posts/show.tpl.html',
					controller: 'PostDetailCtrl'
				})

				.when('/posts/:id/edit', {
					templateUrl: 'posts/edit.tpl.html',
					controller: 'PostEditCtrl'
				});
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Post/Services', [
			'Post/Service'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Session/Service', [])

		.factory('Session', ['$http', '$window', function ($http, $window) {
			var request = function () {
				return $http.get('/auth/check');
			};

			return {
				isAuthenticated: function () {
					return request().then(function(res) {
						if(res.data.result) {
							return {result: true};
						} else {
							return {result: false};
						}
					});
				},

				getUser: function () {
					return request().then(function(res) {
						if(res.data.result) {
							return res.data.user;
						}	else {
							return {result: false};
						}
					});
				},

				destroy: function () {
					$window.location.href = '/auth/destroy';
				}
			};
		}]);
})();
(function () {
	'use strict';

	angular
		.module('Session', [
			'Session/Services'
		]);
})();
(function () {
	'use strict';

	angular
		.module('Session/Services', [
			'Session/Service'
		]);
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzLmpzIiwiZGlyZWN0aXZlcy5qcyIsImZpbHRlcnMuanMiLCJtb2R1bGUuanMiLCJyb3V0ZXMuanMiLCJzZXJ2aWNlcy5qcyIsImNvbXBvbmVudHNcXGF1dGhcXEF1dGgtQ3RybC5qcyIsImNvbXBvbmVudHNcXGF1dGhcXEF1dGgtU2VydmljZS5qcyIsImNvbXBvbmVudHNcXGF1dGhcXElmQXV0aGVudGljYXRlZC1EaXJlY3RpdmUuanMiLCJjb21wb25lbnRzXFxhdXRoXFxJZkd1ZXN0LURpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHNcXGF1dGhcXGNvbnRyb2xsZXJzLmpzIiwiY29tcG9uZW50c1xcYXV0aFxcZGlyZWN0aXZlcy5qcyIsImNvbXBvbmVudHNcXGF1dGhcXG1vZHVsZS5qcyIsImNvbXBvbmVudHNcXGF1dGhcXHJvdXRlcy5qcyIsImNvbXBvbmVudHNcXHBvc3RcXFBvc3QtU2VydmljZS5qcyIsImNvbXBvbmVudHNcXHBvc3RcXFBvc3RDcmVhdGUtQ3RybC5qcyIsImNvbXBvbmVudHNcXHBvc3RcXFBvc3REZXRhaWwtQ3RybC5qcyIsImNvbXBvbmVudHNcXHBvc3RcXFBvc3RFZGl0LUN0cmwuanMiLCJjb21wb25lbnRzXFxwb3N0XFxQb3N0TGlzdC1DdHJsLmpzIiwiY29tcG9uZW50c1xccG9zdFxcY29udHJvbGxlcnMuanMiLCJjb21wb25lbnRzXFxwb3N0XFxtb2R1bGUuanMiLCJjb21wb25lbnRzXFxwb3N0XFxyb3V0ZXMuanMiLCJjb21wb25lbnRzXFxwb3N0XFxzZXJ2aWNlcy5qcyIsImNvbXBvbmVudHNcXHNlc3Npb25cXFNlc3Npb24tU2VydmljZS5qcyIsImNvbXBvbmVudHNcXHNlc3Npb25cXG1vZHVsZS5qcyIsImNvbXBvbmVudHNcXHNlc3Npb25cXHNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QW5CUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJiYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdBcHAvQ29udHJvbGxlcnMnLCBbXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ0FwcC9EaXJlY3RpdmVzJywgW10pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdBcHAvRmlsdGVycycsIFtdKVxyXG5cclxuXHRcdC5jb25maWcoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnQ29uZmlndXJpbmcgbW9kdWxlIEFwcC9GaWx0ZXJzLi4uJyk7XHJcblx0XHR9KVxyXG5cclxuXHRcdC5ydW4oZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnUnVubmluZyBtb2R1bGUgQXBwL0ZpbHRlcnMuLi4nKTtcclxuXHRcdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdBcHAnLCBbXHJcblx0XHRcdCduZ1JvdXRlJyxcclxuXHRcdFx0J25nQW5pbWF0ZScsXHJcblx0XHRcdCduZ1Nhbml0aXplJyxcclxuXHJcblx0XHRcdCduZ1NvY2tldElPJyxcclxuXHRcdFx0J3VpLmJvb3RzdHJhcCcsXHJcblx0XHRcdCdtZ2NyZWEubmdTdHJhcCcsXHRcclxuXHRcdFx0J3Bhc2NhbHByZWNodC50cmFuc2xhdGUnLFxyXG5cdFx0XHQndmljdG9ycXVlaXJvei5uZ1BhZ2luYXRvcicsXHJcblxyXG5cdFx0XHQnQXBwL0NvbnRyb2xsZXJzJyxcclxuXHRcdFx0J0FwcC9GaWx0ZXJzJyxcclxuXHRcdFx0J0FwcC9EaXJlY3RpdmVzJyxcclxuXHRcdFx0J0FwcC9TZXJ2aWNlcycsXHJcblx0XHRcdCdBcHAvUGFydGlhbHMnLFxyXG5cdFx0XHQnQXBwL1JvdXRlcycsXHRcdFx0XHJcblxyXG5cdFx0XHQnQXV0aCcsXHJcblx0XHRcdCdQb3N0JyxcclxuXHRcdF0pXHJcblxyXG5cdFx0LmNvbnN0YW50KCdfQ1NSRicsIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9X2NzcmZdJykpLmF0dHIoJ2NvbnRlbnQnKSlcclxuXHJcblx0XHQuY29uZmlnKFsnJGh0dHBQcm92aWRlcicsICdfQ1NSRicsIGZ1bmN0aW9uICgkaHR0cFByb3ZpZGVyLCBfQ1NSRikge1xyXG5cdFx0XHQkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uID0ge1xyXG5cdFx0XHRcdCdYLUNTUkYtVG9rZW4nOiBfQ1NSRlxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJ0NvbmZpZ3VyaW5nIG1vZHVsZTogQXBwLi4uJyk7XHJcblx0XHR9XSlcclxuXHJcblx0XHQucnVuKFsnJHJvb3RTY29wZScsICckc29ja2V0JywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNvY2tldCkge1xyXG5cdFx0XHQkc29ja2V0KCkudGhlbihmdW5jdGlvbihzb2NrZXQpIHtcclxuXHRcdFx0XHRzb2NrZXQub24oJ3VzZXIgY29ubmVjdGVkJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ05ldyB1c2VyIGNvbm5lY3RlZCEnKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0c29ja2V0Lm9uKCd1c2VyIGRpc2Nvbm5lY3RlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdBIHVzZXIgZGlzY29ubmVjdGVkIScpO1xyXG5cdFx0XHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1c2VyIGRpc2Nvbm5lY3RlZCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQkcm9vdFNjb3BlLiRvbigndXNlciBkaXNjb25uZWN0ZWQnLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJ1J1bm5pbmcgbW9kdWxlOiBBcHAuLi4nKTtcclxuXHRcdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnQXBwL1JvdXRlcycsIFtdKVxyXG5cclxuXHRcdC5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0NvbmZpZ3VyaW5nIG1vZHVsZSBBcHAvUm91dGVzLi4uJyk7XHJcblxyXG5cdFx0XHQkcm91dGVQcm92aWRlclxyXG5cclxuXHRcdFx0XHQud2hlbignLycsIHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaW5kZXgudHBsLmh0bWwnXHJcblx0XHRcdFx0fSlcclxuXHJcblx0XHRcdFx0LndoZW4oJy9hYm91dC11cycsIHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnYWJvdXQtdXMudHBsLmh0bWwnXHJcblx0XHRcdFx0fSlcclxuXHJcblx0XHRcdFx0Lm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvJyB9KTtcclxuXHJcblx0XHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuXHRcdH1dKVxyXG5cclxuXHRcdC5ydW4oZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnUnVubmluZyBtb2R1bGUgQXBwL1JvdXRlcy4uLicpO1xyXG5cdFx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ0FwcC9TZXJ2aWNlcycsIFtdKVxyXG5cclxuXHRcdC52YWx1ZSgndmVyc2lvbicsICcwLjAuMScpO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgnQXV0aC9DdHJsL0F1dGgnLCBbXSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJHNvY2tldCcsICckbG9jYXRpb24nLCAnJHdpbmRvdycsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkc29ja2V0LCAkbG9jYXRpb24sICR3aW5kb3cpIHtcclxuXHRcdCRzY29wZS5hdXRoZW50aWNhdGUgPSBmdW5jdGlvbiAoY3JlZGVudGlhbHMpIHtcclxuXHRcdFx0JGh0dHAucG9zdCgnL2F1dGgvbG9jYWwnLCBjcmVkZW50aWFscykudGhlbihmdW5jdGlvbihyZXMpIHtcclxuXHRcdFx0XHR2YXIgdXNlciA9IHJlcy5kYXRhO1xyXG5cclxuXHRcdFx0XHQkc29ja2V0KCkudGhlbihmdW5jdGlvbihzb2NrZXQpIHtcclxuXHRcdFx0XHRcdGlmKCFyZXMuZGF0YS5yZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0c29ja2V0LmVtaXQoJ3VzZXIgdW5hdXRob3JpemVkJywge30pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAodXNlci51c2VybmFtZSkge1xyXG5cdFx0XHRcdFx0XHRzb2NrZXQuZW1pdCgndXNlciBhdXRoZW50aWNhdGVkJywgdXNlcik7XHJcblx0XHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcblx0XHRcdFx0XHR9XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0c29ja2V0LmVtaXQoJ3VzZXIgYXV0aGVudGljYXRpb24gZXJyb3InLCB7fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkc2NvcGUuYXV0aGVudGljYXRlV2l0aEZCID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2F1dGgvZmFjZWJvb2snO1xyXG5cdFx0fTtcclxuXHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCdBdXRoL1NlcnZpY2UnLCBbXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCdBdXRoL0RpcmVjdGl2ZS9JZkF1dGhlbnRpY2F0ZWQnLCBbXSlcclxuXHJcblx0LmRpcmVjdGl2ZSgnaWZBdXRoZW50aWNhdGVkJywgWydTZXNzaW9uJywgZnVuY3Rpb24oU2Vzc2lvbikge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcclxuXHRcdFx0XHRTZXNzaW9uLmlzQXV0aGVudGljYXRlZCgpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcblx0XHRcdFx0XHRpZighcmVzLnJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHQkZWxlbWVudC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCdBdXRoL0RpcmVjdGl2ZS9JZkd1ZXN0JywgW10pXHJcblxyXG5cdC5kaXJlY3RpdmUoJ2lmR3Vlc3QnLCBbJ1Nlc3Npb24nLCBmdW5jdGlvbihTZXNzaW9uKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KSB7XHJcblx0XHRcdFx0U2Vzc2lvbi5pc0F1dGhlbnRpY2F0ZWQoKS50aGVuKGZ1bmN0aW9uKHJlcykge1xyXG5cdFx0XHRcdFx0aWYocmVzLnJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHQkZWxlbWVudC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCdBdXRoL0NvbnRyb2xsZXJzJywgW1xyXG5cdFx0J0F1dGgvQ3RybC9BdXRoJ1xyXG5cdF0pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgnQXV0aC9EaXJlY3RpdmVzJywgW1xyXG5cdFx0J0F1dGgvRGlyZWN0aXZlL0lmQXV0aGVudGljYXRlZCcsXHJcblx0XHQnQXV0aC9EaXJlY3RpdmUvSWZHdWVzdCdcclxuXHRdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhci5tb2R1bGUoJ0F1dGgnLCBbXHJcblx0XHQnbmdSb3V0ZScsXHJcblx0XHQnbmdTb2NrZXRJTycsXHJcblxyXG5cdFx0J1Nlc3Npb24vU2VydmljZScsXHJcblxyXG5cdFx0J0F1dGgvQ29udHJvbGxlcnMnLFxyXG5cdFx0J0F1dGgvUm91dGVzJyxcclxuXHRcdCdBdXRoL0RpcmVjdGl2ZXMnXHJcblx0XSlcclxuXHJcblx0LnJ1bihbJyRyb290U2NvcGUnLCAnJHJvdXRlJywgJyRsb2NhdGlvbicsICckc29ja2V0JywgJ1Nlc3Npb24nLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkcm91dGUsICRsb2NhdGlvbiwgJHNvY2tldCwgU2Vzc2lvbikge1xyXG5cdFx0JHNvY2tldCgpLnRoZW4oZnVuY3Rpb24oc29ja2V0KSB7XHJcblx0XHRcdHNvY2tldC5vbigndXNlciBhdXRoZW50aWNhdGVkJywgZnVuY3Rpb24odXNlcikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdDb25ncmF0dWxhdGlvbnMsICcrdXNlci51c2VybmFtZSsnLCB5b3VcXCdyZSBsb2dnZWQhJyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c29ja2V0Lm9uKCd1c2VyIHVuYXV0aG9yaXplZCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdTb3JyeSwgeW91IGNhbiBub3QgYWNjZXNzIHRoaXMgYXJlYSEnKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oJ3VzZXIgYXV0aGVudGljYXRpb24gZXJyb3InLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ09jb3JyZXUgdW0gZXJybywgdGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUhJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JHJvb3RTY29wZS4kb24oJ3Nlc3Npb246bG9nb3V0JywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRTZXNzaW9uLmRlc3Ryb3koKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0KSB7XHJcblx0XHRcdHZhciBwYXJhbXMgPSBuZXh0LiQkcm91dGU7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygnQ2hlY2tpbmcgaWYgeW91IGNhbiBhY2Nlc3MgdGhpcyBsb2NhdGlvbi4uLicpO1xyXG5cclxuXHRcdFx0dmFyIGlzQXV0aGVudGljYXRlZCA9IFNlc3Npb24uaXNBdXRoZW50aWNhdGVkO1xyXG5cclxuXHRcdFx0aWYocGFyYW1zLmd1ZXN0KSB7IC8vIE9ubHkgZ3Vlc3RzIHVzZXJzIHdpbGwgY2FuIGdvIGluLlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdUaGlzIHJvdXRlIGFyZSByZXNlcnZlZCBmb3IgZ3Vlc3RzIScpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdDaGVja2luZyBpZiB5b3UgYXJlIGEgZ3Vlc3QuLi4nKTtcclxuXHJcblx0XHRcdFx0aXNBdXRoZW50aWNhdGVkKCkudGhlbihmdW5jdGlvbihyZXMpIHtcclxuXHRcdFx0XHRcdGlmKHJlcy5yZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ1lvdSBhcmUgbm90IGEgZ3Vlc3QuJyk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdZb3UgY2FuIG5vdCBhY2Nlc3MgdGhpcyBhcmVhLicpO1xyXG5cdFx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnLycpOyAvLyBUZW1wb3JhcnksIHVudGlsICRyb3V0ZUNoYW5nZVN0YXJ0IGNhbiBub3QgcHJldmVudCBkZWZhdWx0IHRoaXMgZXZlbnQuXHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCFyZXMucmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdZb3UgYXJlIGEgZ3Vlc3QsIHlvdSBjYW4gZ28gb24hJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSBpZiAocGFyYW1zLmF1dGhlbnRpY2F0ZWQpIHsgLy8gT25seSBhdXRoZW50aWNhdGVkIHVzZXJzIHdpbGwgY2FuIGdvIGluLlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdUaGlzIHJvdXRlIGFyZSByZXNlcnZlZCBmb3IgYXV0aGVudGljYXRlZCB1c2VycyEnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnQ2hlY2tpbmcgaWYgeW91IGFyZSBhdXRoZW50aWNhdGVkLi4uJyk7XHJcblx0XHRcdFx0aXNBdXRoZW50aWNhdGVkKCkudGhlbihmdW5jdGlvbihyZXMpIHtcclxuXHRcdFx0XHRcdGlmKCFyZXMucmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdCBhdXRoZW50aWNhdGVkLicpO1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnWW91IGNhbiBub3QgYWNjZXNzIHRoaXMgYXJlYS4nKTtcclxuXHRcdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTsgLy8gVGVtcG9yYXJ5LCB1bnRpbCAkcm91dGVDaGFuZ2VTdGFydCBjYW4gbm90IHByZXZlbnQgZGVmYXVsdCB0aGlzIGV2ZW50LlxyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChyZXMucmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdZb3UgYXJlIGF1dGhlbnRpY2F0ZWQsIHlvdSBjYW4gZ28gb24hJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIG5nUm91dGUgYnVnXHJcblx0XHRcdC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9KTtcdFxyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhci5tb2R1bGUoJ0F1dGgvUm91dGVzJywgW10pXHJcblxyXG5cdC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xyXG5cdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0LndoZW4oJy9hdXRoZW50aWNhdGlvbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uLnRwbC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwnLFxyXG5cdFx0XHRcdGd1ZXN0OiB0cnVlXHJcblx0XHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnUG9zdC9TZXJ2aWNlJywgWyduZ1Jlc291cmNlJ10pXHJcblxyXG5cdFx0LmZhY3RvcnkoJ1Bvc3QnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcclxuXHRcdFx0cmV0dXJuICRyZXNvdXJjZSAoJycsIHt9LCB7XHJcblx0XHRcdFx0J2dldCc6IHt1cmw6ICcvYXBpL3Bvc3RzLzppZCcsIHBhcmFtczoge2lkOiAnQGlkJ30sIG1ldGhvZDogJ0dFVCcsIGlzQXJyYXk6IGZhbHNlfSxcclxuXHRcdFx0XHQnbGlzdCc6IHt1cmw6ICcvYXBpL3Bvc3RzJywgcGFyYW1zOiB7fSwgbWV0aG9kOiAnR0VUJywgaXNBcnJheTogZmFsc2V9LFxyXG5cdFx0XHRcdCdzYXZlJzoge3VybDogJy9hcGkvcG9zdHMnLCBwYXJhbXM6IHt9LCBtZXRob2Q6ICdQT1NUJywgaXNBcnJheTogZmFsc2V9LFxyXG5cdFx0XHRcdCd1cGRhdGUnOiB7dXJsOiAnL2FwaS9wb3N0cy86aWQnLCBwYXJhbXM6IHtpZDogJ0BpZCd9LCBtZXRob2Q6ICdQVVQnLCBpc0FycmF5OiBmYWxzZX0sXHJcblx0XHRcdFx0J2Rlc3Ryb3knOiB7dXJsOiAnL2FwaS9wb3N0cy86aWQnLCBwYXJhbXM6IHtpZDogJ0BpZCd9LCBtZXRob2Q6ICdERUxFVEUnLCBpc0FycmF5OiBmYWxzZX1cclxuXHRcdFx0fSk7XHJcblx0XHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ1Bvc3QvQ3RybC9Qb3N0Q3JlYXRlJywgW10pXHJcblxyXG5cdFx0LmNvbnRyb2xsZXIoJ1Bvc3RDcmVhdGVDdHJsJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyRzb2NrZXQnLCAnUG9zdCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHNvY2tldCwgUG9zdCkge1xyXG5cdFx0XHQkc2NvcGUucG9zdCA9IG5ldyBQb3N0KCk7XHJcblxyXG5cdFx0XHQkc2NvcGUuc3RvcmVQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcclxuXHRcdFx0XHRwb3N0XHJcblx0XHRcdFx0XHQuJHNhdmUoKVxyXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocG9zdCkge1xyXG5cdFx0XHRcdFx0XHRpZihwb3N0KSB7XHJcblx0XHRcdFx0XHRcdFx0JHNvY2tldCgpLnRoZW4oZnVuY3Rpb24oc29ja2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzb2NrZXQuZW1pdCgncG9zdCBuZXcnLCBwb3N0Ll9pZCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9wb3N0cy8nICsgKHBvc3QuX2lkID8gcG9zdC5faWQgOiAnJykpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnUG9zdC9DdHJsL1Bvc3REZXRhaWwnLCBbXSlcclxuXHJcblx0XHQuY29udHJvbGxlcignUG9zdERldGFpbEN0cmwnLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnUG9zdCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgUG9zdCkge1xyXG5cdFx0XHR2YXIgcG9zdCA9ICRzY29wZS5wb3N0ID0gUG9zdC5nZXQoeyBpZDogJHJvdXRlUGFyYW1zLmlkIH0pO1xyXG5cdFx0fV0pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdQb3N0L0N0cmwvUG9zdEVkaXQnLCBbXSlcclxuXHJcblx0XHQuY29udHJvbGxlcignUG9zdEVkaXRDdHJsJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICdQb3N0JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIFBvc3QpIHtcclxuXHRcdFx0JHNjb3BlLnBvc3QgPSBQb3N0LmdldCh7IGlkOiAkcm91dGVQYXJhbXMuaWQgfSk7XHJcblxyXG5cdFx0XHQkc2NvcGUudXBkYXRlUG9zdCA9IGZ1bmN0aW9uIChwb3N0KSB7XHJcblx0XHRcdFx0cG9zdFxyXG5cdFx0XHRcdFx0LiR1cGRhdGUoKVxyXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL3Bvc3RzJyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnUG9zdC9DdHJsL1Bvc3RMaXN0JywgW10pXHJcblxyXG5cdFx0LmNvbnRyb2xsZXIoJ1Bvc3RMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckc29ja2V0JywgJyRtb21lbnQnLCAnUG9zdCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHNvY2tldCwgJG1vbWVudCwgUG9zdCkge1xyXG5cdFx0XHQkc2NvcGUuJHdhdGNoKCdwYWdpbmF0b3IucGVyUGFnZScsIGZ1bmN0aW9uKHBlclBhZ2UpIHtcclxuXHRcdFx0XHQkc2NvcGUuJGJyb2FkY2FzdCgncG9zdHMgcGFnaW5hdG9yIHJlbG9hZCcpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdCRzY29wZS4kb24oJ3Bvc3RzIHBhZ2UgY2hhbmdlZCcsIGZ1bmN0aW9uKGV2ZW50LCBwYWdlLCBwYWdpbmF0b3IpIHtcclxuXHRcdFx0XHRpZihwYWdpbmF0b3IucGVyUGFnZSA8IDEpIHtcclxuXHRcdFx0XHRcdHBhZ2luYXRvci5wZXJQYWdlID0gNDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFBvc3QubGlzdCh7XHJcblx0XHRcdFx0XHRwYWdlOiBwYWdlLFxyXG5cdFx0XHRcdFx0cGVyX3BhZ2U6IHBhZ2luYXRvci5wZXJQYWdlXHJcblx0XHRcdFx0fSkuJHByb21pc2UudGhlbihmdW5jdGlvbihwYWcpIHtcclxuXHRcdFx0XHRcdCRtb21lbnQoKS50aGVuKGZ1bmN0aW9uKG1vbWVudCkge1xyXG5cdFx0XHRcdFx0XHQkc2NvcGUucG9zdHMgPSBwYWcuZGF0YTtcclxuXHJcblx0XHRcdFx0XHRcdE9iamVjdC5rZXlzKCRzY29wZS5wb3N0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIHBvc3QgPSAkc2NvcGUucG9zdHNba2V5XTtcclxuXHJcblx0XHRcdFx0XHRcdFx0cG9zdC5jcmVhdGVkX2F0ID0gbW9tZW50KHBvc3QuY3JlYXRlZF9hdCkuZnJvbU5vdygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdGFuZ3VsYXIuZXh0ZW5kKHBhZ2luYXRvciwgcGFnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQkc29ja2V0KCkudGhlbihmdW5jdGlvbihzb2NrZXQpIHtcclxuXHRcdFx0XHRzb2NrZXQub24oJ3Bvc3QgbmV3JywgZnVuY3Rpb24ocG9zdCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocG9zdCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCRzY29wZS4kYnJvYWRjYXN0KCdwb3N0cyBwYWdpbmF0b3IgcmVsb2FkJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0JHNjb3BlLmVkaXRQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL3Bvc3RzLycgKyBwb3N0LmlkICsgJy9lZGl0Jyk7XHJcblx0XHRcdH07XHJcblx0XHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ1Bvc3QvQ29udHJvbGxlcnMnLCBbXHRcclxuXHRcdFx0J1Bvc3QvQ3RybC9Qb3N0TGlzdCcsXHJcblx0XHRcdCdQb3N0L0N0cmwvUG9zdERldGFpbCcsXHJcblx0XHRcdCdQb3N0L0N0cmwvUG9zdENyZWF0ZScsXHJcblx0XHRcdCdQb3N0L0N0cmwvUG9zdEVkaXQnXHJcblx0XHRdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnUG9zdCcsIFtcclxuXHRcdFx0J25nUm91dGUnLFxyXG5cdFx0XHQnbmdTb2NrZXRJTycsXHJcblx0XHRcdCduZ01vbWVudCcsXHJcblxyXG5cdFx0XHQnUG9zdC9Db250cm9sbGVycycsXHJcblx0XHRcdCdQb3N0L1NlcnZpY2VzJyxcclxuXHRcdFx0J1Bvc3QvUm91dGVzJ1xyXG5cdFx0XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ1Bvc3QvUm91dGVzJywgW10pXHJcblxyXG5cdFx0LmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XHJcblx0XHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdFx0LndoZW4oJy9wb3N0cycsIHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAncG9zdHMvbGlzdC50cGwuaHRtbCcsXHJcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnUG9zdExpc3RDdHJsJ1xyXG5cdFx0XHRcdH0pXHJcblxyXG5cdFx0XHRcdC53aGVuKCcvcG9zdHMvY3JlYXRlJywge1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwb3N0cy9jcmVhdGUudHBsLmh0bWwnLFxyXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ1Bvc3RDcmVhdGVDdHJsJ1xyXG5cdFx0XHRcdH0pXHJcblxyXG5cdFx0XHRcdC53aGVuKCcvcG9zdHMvOmlkJywge1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwb3N0cy9zaG93LnRwbC5odG1sJyxcclxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0RGV0YWlsQ3RybCdcclxuXHRcdFx0XHR9KVxyXG5cclxuXHRcdFx0XHQud2hlbignL3Bvc3RzLzppZC9lZGl0Jywge1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwb3N0cy9lZGl0LnRwbC5odG1sJyxcclxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0RWRpdEN0cmwnXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ1Bvc3QvU2VydmljZXMnLCBbXHJcblx0XHRcdCdQb3N0L1NlcnZpY2UnXHJcblx0XHRdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnU2Vzc2lvbi9TZXJ2aWNlJywgW10pXHJcblxyXG5cdFx0LmZhY3RvcnkoJ1Nlc3Npb24nLCBbJyRodHRwJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJGh0dHAsICR3aW5kb3cpIHtcclxuXHRcdFx0dmFyIHJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2F1dGgvY2hlY2snKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0aXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdCgpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcblx0XHRcdFx0XHRcdGlmKHJlcy5kYXRhLnJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB7cmVzdWx0OiB0cnVlfTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge3Jlc3VsdDogZmFsc2V9O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHRnZXRVc2VyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdCgpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcblx0XHRcdFx0XHRcdGlmKHJlcy5kYXRhLnJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXMuZGF0YS51c2VyO1xyXG5cdFx0XHRcdFx0XHR9XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge3Jlc3VsdDogZmFsc2V9O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHRkZXN0cm95OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2F1dGgvZGVzdHJveSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fV0pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdTZXNzaW9uJywgW1xyXG5cdFx0XHQnU2Vzc2lvbi9TZXJ2aWNlcydcclxuXHRcdF0pO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdTZXNzaW9uL1NlcnZpY2VzJywgW1xyXG5cdFx0XHQnU2Vzc2lvbi9TZXJ2aWNlJ1xyXG5cdFx0XSk7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9