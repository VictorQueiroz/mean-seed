"use strict";

var socket = io();

angular.module("app", [ "ngRoute", "app.routes", "app.controllers", "app.filters", "app.directives", "app.services", "partials", "ui.bootstrap", "mgcrea.ngStrap" ]), 
angular.module("app.controllers", [ "user.controllers" ]), angular.module("app.directives", []), 
angular.module("app.filters", []), angular.module("partials", []).run([ "$templateCache", function($templateCache) {
    $templateCache.put("about-us.tpl.html", "<div class=container><div class=row><div class=col-lg-12><h1>About us</h1><p>What don't you know about us? Feel free to e-mail me as a <b>friend</b>:</p><p>victorcqueirozg@gmail.com.</p></div></div></div>"), 
    $templateCache.put("authentication.tpl.html", '<div class=container><div class=row><div class=col-lg-12><h1>Autenticação</h1><form name=form ng-submit=authenticate(credentials)><div class=form-group><label for="">Nome de Usuário</label><input ng-model=credentials.username class=form-control></div><div class=form-group><label for="">Senha</label><input ng-model=credentials.password type=password class=form-control></div><div class=form-group><button type=submit class="btn btn-default">Conectar-se</button></div></form></div></div></div>'), 
    $templateCache.put("index.tpl.html", "<div class=container><div class=row><div class=col-lg-12><h1>You have arrived!</h1><p>Still waiting, soon we will have a good gruntfile for your development.</p></div></div></div>");
} ]), angular.module("app.routes", [ "ngRoute", "user.routes" ]).config([ "$routeProvider", "$locationProvider", function($routeProvider, $locationProvider) {
    $routeProvider.otherwise({
        redirectTo: "/"
    }), $locationProvider.html5Mode(!0);
} ]), angular.module("app.services", [ "user.services" ]).value("version", "0.0.1").factory("$socket", [ "$window", function($window) {
    return $window.io();
} ]), angular.module("user.ctrl.auth", [ "app.services" ]).controller("AuthCtrl", [ "$scope", "$http", "$alert", "$socket", function($scope, $http, $alert, $socket) {
    $socket.on("user authenticated", function(user) {
        alert("Congratulations, " + user.username + ", you're logged!");
    }), $socket.on("user unauthorized", function() {
        alert("Sorry, you can not access this area!");
    }), $socket.on("user authentication error", function() {
        alert("Ocorreu um erro, tente novamente mais tarde!");
    }), $scope.authenticate = function(credentials) {
        $http.post("/auth/local", credentials).then(function(res) {
            var user = res.data;
            res.data.result || $socket.emit("user unauthorized", {}), user.username ? $socket.emit("user authenticated", user) : $socket.emit("user authentication error", {});
        });
    };
} ]), angular.module("user.service", []).factory("User", [ "$resource", function($resource) {
    return $resource("", {}, {
        list: {
            url: "/api/users",
            params: {},
            method: "GET",
            isArray: !0
        },
        store: {
            url: "/api/users",
            params: {},
            method: "POST",
            isArray: !1
        },
        update: {
            url: "/api/users/:id",
            params: {
                id: "@id"
            },
            method: "PUT",
            isArray: !1
        },
        destroy: {
            url: "/api/users/:id",
            params: {
                id: "@id"
            },
            method: "DELETE",
            isArray: !1
        }
    });
} ]), angular.module("user.controllers", [ "user.ctrl.auth" ]), angular.module("user.routes", [ "user.ctrl.auth" ]).config([ "$routeProvider", function($routeProvider) {
    $routeProvider.when("/", {
        templateUrl: "index.tpl.html"
    }).when("/about-us", {
        templateUrl: "about-us.tpl.html"
    }).when("/authentication", {
        templateUrl: "authentication.tpl.html",
        controller: "AuthCtrl"
    });
} ]), angular.module("user.services", [ "user.service" ]);